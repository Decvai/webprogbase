{"version":3,"sources":["cache.js","operations/queries/authorization.js","utils/loader/Loader.jsx","utils/error/Error.jsx","utils/input/Input.jsx","components/authorization/Login.jsx","components/authorization/Registration.jsx","operations/mutations/chatMutations.js","operations/queries/chatQueries.js","operations/subscriptions/chatSubscriptions.js","assets/icons/chat-members.png","assets/icons/leave.png","components/chatSection/chatList/chatMenu/ChatMenu.jsx","utils/utils.js","assets/icons/update.png","assets/icons/send.png","components/chatSection/chatList/chat/Chat.jsx","components/chatSection/chatList/ChatList.jsx","components/chatSection/Popup.jsx","components/chatSection/ChatSection.jsx","assets/icons/logout.svg","components/navbar/Navbar.jsx","assets/icons/logo.png","components/App.jsx","config.js","index.js","utils/input/input.module.scss"],"names":["cache","InMemoryCache","typePolicies","Query","fields","popupDisplay","read","popupDisplayVar","currentUser","currentUserVar","makeVar","REGISTRATION","gql","LOGIN","PROFILE_QUERY","Loader","className","Error","props","children","Input","styles","input","value","onChange","e","setValue","target","type","placeholder","Login","useState","username","setUsername","password","setPassword","error","setError","loader","setLoader","useLazyQuery","onCompleted","data","localStorage","setItem","login","window","location","reload","onError","err","graphQLErrors","message","onSubmit","preventDefault","onClick","variables","Registration","register","SET_USER_CURRENT_ROOM","LEAVE_CURRENT_ROOM","CREATE_MESSAGE","CREATE_NEW_ROOM","UPDATE_ROOM","DELETE_ROOM","GET_ALL_ROOMS","MESSAGES_SUBSCRIPTION","ROOM_CREATED_SUB","ROOM_DELETED_SUB","ROOM_UPDATED","MEMBER_JOINED","MEMBER_LEFT","CURRENT_ROOM_CHANGED","ChatMenu","history","roomId","useParams","id","hasRoomsData","setHasRoomsData","messages","setMessages","members","setMembers","lastMessage","useSubscription","onSubscriptionData","newMember","subscriptionData","memberJoined","oldMember","memberLeft","filter","m","currentRoomChanged","currentRoom","push","alert","useQuery","fetchPolicy","roomsData","getRoomsLoading","loading","useMutation","console","log","leaveCurrentRoom","createMessage","deleteRoom","updateRoom","useEffect","lastMsg","messageCreated","document","querySelector","query","element","scrollTop","scrollHeight","gotoBottom","confirmBtnHandler","text","rooms","find","r","isOwner","owner","to","lastMessages","src","LeaveIcon","alt","onBlur","updateBtn","setTimeout","classList","remove","onBlurNameHandler","contentEditable","spellCheck","onFocus","add","suppressContentEditableWarning","name","stopPropagation","currentName","innerText","onUpdateNameHandler","map","author","onKeyUp","key","ChatMembersIcon","membersList","chatOpen","confirmBtn","toggle","membersListToggle","member","Chat","room","setUserCurrentRoom","then","timestamp","replace","substr","ChatList","subscribeToMore","updateQuery","prev","newFeedItem","roomCreated","Object","assign","roomDeleted","Popup","roomName","setRoomName","useReactiveVar","createRoom","style","display","cursor","ChatSection","withRouter","me","removeItem","LogoutIcon","App","path","component","exact","API_URI","httpLink","createHttpLink","uri","authLink","setContext","_","headers","token","getItem","authorization","wsLink","WebSocketLink","options","reconnect","connectionParams","Authorization","concatedLink","concat","splitLink","split","definition","getMainDefinition","kind","operation","client","ApolloClient","link","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.458f066f.chunk.js","sourcesContent":["import { InMemoryCache, makeVar } from '@apollo/client';\r\n\r\nexport const cache = new InMemoryCache({\r\n\ttypePolicies: {\r\n\t\tQuery: {\r\n\t\t\tfields: {\r\n\t\t\t\tpopupDisplay: {\r\n\t\t\t\t\tread() {\r\n\t\t\t\t\t\treturn popupDisplayVar();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tcurrentUser: {\r\n\t\t\t\t\tread() {\r\n\t\t\t\t\t\treturn currentUserVar();\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const popupDisplayVar = makeVar('none');\r\nexport const currentUserVar = makeVar();\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const REGISTRATION = gql`\r\n\tquery Register($username: String!, $password: String!) {\r\n\t\tregister(username: $username, password: $password) {\r\n\t\t\tid\r\n\t\t\tusername\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const LOGIN = gql`\r\n\tquery Login($username: String!, $password: String!) {\r\n\t\tlogin(username: $username, password: $password)\r\n\t}\r\n`;\r\n\r\nexport const PROFILE_QUERY = gql`\r\n\tquery {\r\n\t\tme {\r\n\t\t\tid\r\n\t\t\tusername\r\n\t\t\tcurrentRoom {\r\n\t\t\t\tid\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n","import './loader.scss';\r\n\r\nfunction Loader() {\r\n\treturn (\r\n\t\t<div className='loader'>\r\n\t\t\t<div className='lds-roller'>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t\t<div></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Loader;\r\n","import './error.scss';\r\n\r\nfunction Error(props) {\r\n\treturn <div className='error'>{props.children}</div>;\r\n}\r\n\r\nexport default Error;\r\n","import styles from './input.module.scss';\n\nconst Input = props => {\n\treturn (\n\t\t<input\n\t\t\tclassName={styles.input}\n\t\t\tvalue={props.value}\n\t\t\tonChange={e => props.setValue(e.target.value)}\n\t\t\ttype={props.type}\n\t\t\tplaceholder={props.placeholder}\n\t\t/>\n\t);\n};\n\nexport default Input;\n","import { useLazyQuery } from '@apollo/client';\r\nimport { useState } from 'react';\r\nimport { LOGIN } from '../../operations/queries/authorization';\r\nimport Error from '../../utils/error/Error';\r\nimport Input from '../../utils/input/Input';\r\nimport Loader from '../../utils/loader/Loader';\r\nimport './authorization.scss';\r\n\r\nfunction Login() {\r\n\tconst [username, setUsername] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [error, setError] = useState('');\r\n\r\n\tconst [loader, setLoader] = useState(false);\r\n\r\n\tconst [login] = useLazyQuery(LOGIN, {\r\n\t\tonCompleted: data => {\r\n\t\t\tlocalStorage.setItem('token', data.login);\r\n\t\t\twindow.location.reload(false);\r\n\t\t},\r\n\t\tonError(err) {\r\n\t\t\tsetLoader(false);\r\n\t\t\tsetError(err?.graphQLErrors[0]?.message);\r\n\t\t},\r\n\t});\r\n\r\n\tif (loader) return <Loader />;\r\n\r\n\treturn (\r\n\t\t<div className='authorization'>\r\n\t\t\t<div className='authorization__header'>Sign in</div>\r\n\t\t\t<form onSubmit={e => e.preventDefault()}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tvalue={username}\r\n\t\t\t\t\tsetValue={setUsername}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tplaceholder='Username'\r\n\t\t\t\t/>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tclassName='authorization__password'\r\n\t\t\t\t\tvalue={password}\r\n\t\t\t\t\tsetValue={setPassword}\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t/>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='authorization__btn'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetLoader(true);\r\n\t\t\t\t\t\tlogin({\r\n\t\t\t\t\t\t\tvariables: { username, password },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tContinue\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\r\n\t\t\t{error && <Error>{error}</Error>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Login;\r\n","import { useLazyQuery } from '@apollo/client';\r\nimport { useState } from 'react';\r\nimport { LOGIN, REGISTRATION } from '../../operations/queries/authorization';\r\nimport Error from '../../utils/error/Error';\r\nimport Input from '../../utils/input/Input';\r\nimport Loader from '../../utils/loader/Loader';\r\nimport './authorization.scss';\r\n\r\nfunction Registration() {\r\n\tconst [username, setUsername] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [error, setError] = useState('');\r\n\r\n\tconst [loader, setLoader] = useState(false);\r\n\r\n\tconst [register] = useLazyQuery(REGISTRATION, {\r\n\t\tonCompleted: () => {\r\n\t\t\tlogin({\r\n\t\t\t\tvariables: { username, password },\r\n\t\t\t});\r\n\t\t},\r\n\t\tonError(err) {\r\n\t\t\tsetLoader(false);\r\n\t\t\tsetError(err?.graphQLErrors[0]?.message);\r\n\t\t},\r\n\t});\r\n\r\n\tconst [login] = useLazyQuery(LOGIN, {\r\n\t\tonCompleted: data => {\r\n\t\t\tlocalStorage.setItem('token', data.login);\r\n\t\t\twindow.location.reload(false);\r\n\t\t},\r\n\t\tonError(err) {\r\n\t\t\tsetError(err?.graphQLErrors[0]?.message);\r\n\t\t},\r\n\t});\r\n\r\n\tif (loader) return <Loader />;\r\n\r\n\treturn (\r\n\t\t<div className='authorization'>\r\n\t\t\t<div className='authorization__header'>Sign up</div>\r\n\t\t\t<form onSubmit={e => e.preventDefault()}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tvalue={username}\r\n\t\t\t\t\tsetValue={setUsername}\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tplaceholder='Username'\r\n\t\t\t\t/>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tvalue={password}\r\n\t\t\t\t\tsetValue={setPassword}\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t/>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='authorization__btn'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetLoader(true);\r\n\t\t\t\t\t\tregister({\r\n\t\t\t\t\t\t\tvariables: { username, password },\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tContinue\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\r\n\t\t\t{error && <Error>{error}</Error>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Registration;\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const SET_USER_CURRENT_ROOM = gql`\r\n\tmutation JoinRoom($roomId: ID!) {\r\n\t\tjoinRoom(roomId: $roomId) {\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const LEAVE_CURRENT_ROOM = gql`\r\n\tmutation {\r\n\t\tleaveCurrentRoom {\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const CREATE_MESSAGE = gql`\r\n\tmutation CreateMessage($text: String!) {\r\n\t\tcreateMessage(text: $text) {\r\n\t\t\ttext\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const CREATE_NEW_ROOM = gql`\r\n\tmutation CreateRoom($name: String!) {\r\n\t\tcreateRoom(name: $name) {\r\n\t\t\tid\r\n\t\t\tname\r\n\t\t\ttimestamp\r\n\t\t\towner {\r\n\t\t\t\tid\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const UPDATE_ROOM = gql`\r\n\tmutation UpdateRoom($id: ID!, $name: String!) {\r\n\t\tupdateRoom(id: $id, name: $name) {\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const DELETE_ROOM = gql`\r\n\tmutation DeleteRoom($id: ID!) {\r\n\t\tdeleteRoom(id: $id) {\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n`;\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const GET_ALL_ROOMS = gql`\r\n\tquery {\r\n\t\trooms {\r\n\t\t\tid\r\n\t\t\tname\r\n\t\t\ttimestamp\r\n\t\t\tmembers {\r\n\t\t\t\tid\r\n\t\t\t\tusername\r\n\t\t\t}\r\n\t\t\towner {\r\n\t\t\t\tid\r\n\t\t\t}\r\n\t\t\tlastMessages {\r\n\t\t\t\tid\r\n\t\t\t\ttext\r\n\t\t\t\tauthor {\r\n\t\t\t\t\tid\r\n\t\t\t\t\tusername\r\n\t\t\t\t}\r\n\t\t\t\ttimestamp\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const MESSAGES_SUBSCRIPTION = gql`\r\n\tsubscription OnMessageCreated {\r\n\t\tmessageCreated {\r\n\t\t\tid\r\n\t\t\troom {\r\n\t\t\t\tid\r\n\t\t\t}\r\n\t\t\tauthor {\r\n\t\t\t\tid\r\n\t\t\t\tusername\r\n\t\t\t}\r\n\t\t\ttext\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ROOM_CREATED_SUB = gql`\r\n\tsubscription OnRoomCreated {\r\n\t\troomCreated {\r\n\t\t\tid\r\n\t\t\tname\r\n\t\t\ttimestamp\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ROOM_DELETED_SUB = gql`\r\n\tsubscription OnRoomDeleted {\r\n\t\troomDeleted {\r\n\t\t\tid\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ROOM_UPDATED = gql`\r\n\tsubscription OnRoomUpdated {\r\n\t\troomUpdated {\r\n\t\t\tid\r\n\t\t\tname\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const MEMBER_JOINED = gql`\r\n\tsubscription OnMemberJoined {\r\n\t\tmemberJoined {\r\n\t\t\tid\r\n\t\t\tusername\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const MEMBER_LEFT = gql`\r\n\tsubscription OnMemberLeft {\r\n\t\tmemberLeft {\r\n\t\t\tid\r\n\t\t\tusername\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const CURRENT_ROOM_CHANGED = gql`\r\n\tsubscription OnCurrentRoomChanged {\r\n\t\tcurrentRoomChanged {\r\n\t\t\tcurrentRoom {\r\n\t\t\t\tid\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/chat-members.9aa44a85.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAPCAYAAAD6Ud/mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEeSURBVHgBtZSxTsNADIbto4kY+wjpG8AbwBt0QBUjbBnLWKqqhyrEWrZjgm4oMPQN2jcob8A9AmNo4YwdNShEWWjvvsF2IsvWfz4fQgNn6eREgXqUODPDDnigVf3o9nU7/ozHQNTf/rLgCVUGoiLOo1XZhMDdrw83x+AJbFLhwF2+mtESPIK99PadfQKeIMAl29mLGT4FbVTBrmFzOjfaFo3E9NKJ5nGNmxL+g4whyqMuF5VaSVGL5zyf6g8sk87Tu4Rns4BfdUpnZnADO/CnFuE0e7i+wnpSXd2ue1Q0I7fiM2vzCXVUPSEzI83LKsUt7MGzGVhCN5M4hoMLhIBsX5iF3EQFAfnKv9/EI9JRUEUCrw+JD6qoSgvCY8X8AKYAcQrEDXykAAAAAElFTkSuQmCC\"","import { useMutation, useQuery, useSubscription } from '@apollo/client';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Redirect, useParams } from 'react-router';\r\nimport { currentUserVar } from '../../../../cache';\r\nimport {\r\n\tCREATE_MESSAGE,\r\n\tDELETE_ROOM,\r\n\tLEAVE_CURRENT_ROOM,\r\n\tUPDATE_ROOM,\r\n} from '../../../../operations/mutations/chatMutations';\r\nimport { GET_ALL_ROOMS } from '../../../../operations/queries/chatQueries';\r\nimport {\r\n\tCURRENT_ROOM_CHANGED,\r\n\tMEMBER_JOINED,\r\n\tMEMBER_LEFT,\r\n\tMESSAGES_SUBSCRIPTION,\r\n\tROOM_UPDATED,\r\n} from '../../../../operations/subscriptions/chatSubscriptions';\r\nimport Loader from '../../../../utils/loader/Loader';\r\nimport { gotoBottom } from '../../../../utils/utils';\r\nimport ChatMembersIcon from './../../../../assets/icons/chat-members.png';\r\nimport LeaveIcon from './../../../../assets/icons/leave.png';\r\nimport SendMessageIcon from './../../../../assets/icons/send.png';\r\nimport UpdateIcon from './../../../../assets/icons/update.png';\r\nimport './chatMenu.scss';\r\n\r\nfunction ChatMenu({ history }) {\r\n\tconst { id: roomId } = useParams();\r\n\tconst [hasRoomsData, setHasRoomsData] = useState(false);\r\n\tconst [messages, setMessages] = useState([]);\r\n\tconst [members, setMembers] = useState([]);\r\n\r\n\tconst currentUser = currentUserVar();\r\n\r\n\tconst { data: lastMessage } = useSubscription(MESSAGES_SUBSCRIPTION);\r\n\tuseSubscription(ROOM_UPDATED);\r\n\tuseSubscription(MEMBER_JOINED, {\r\n\t\tonSubscriptionData: ({ subscriptionData }) => {\r\n\t\t\tconst newMember = subscriptionData.data.memberJoined;\r\n\t\t\tsetMembers([...members, newMember]);\r\n\t\t},\r\n\t});\r\n\tuseSubscription(MEMBER_LEFT, {\r\n\t\tonSubscriptionData: ({ subscriptionData }) => {\r\n\t\t\tconst oldMember = subscriptionData.data.memberLeft;\r\n\t\t\tsetMembers(members.filter(m => m.id !== oldMember.id));\r\n\t\t},\r\n\t});\r\n\tuseSubscription(CURRENT_ROOM_CHANGED, {\r\n\t\tonSubscriptionData: ({ subscriptionData }) => {\r\n\t\t\tconst room = subscriptionData.data.currentRoomChanged.currentRoom;\r\n\t\t\tif (!room) {\r\n\t\t\t\tcurrentUserVar({ ...currentUserVar(), currentRoom: null });\r\n\t\t\t\thistory.push('/rooms');\r\n\t\t\t\talert('room was deleted');\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\r\n\tconst { data: roomsData, loading: getRoomsLoading } = useQuery(\r\n\t\tGET_ALL_ROOMS,\r\n\t\t{\r\n\t\t\tfetchPolicy: 'network-only',\r\n\t\t}\r\n\t);\r\n\r\n\tconst [leaveCurrentRoom] = useMutation(LEAVE_CURRENT_ROOM, {\r\n\t\tonCompleted: () => {\r\n\t\t\tcurrentUserVar({ ...currentUserVar(), currentRoom: null });\r\n\t\t\thistory.push('/rooms');\r\n\t\t},\r\n\t\tonError: err => {\r\n\t\t\tconsole.log(err);\r\n\t\t\thistory.push('/rooms');\r\n\t\t},\r\n\t});\r\n\tconst [createMessage] = useMutation(CREATE_MESSAGE);\r\n\tconst [deleteRoom] = useMutation(DELETE_ROOM);\r\n\tconst [updateRoom] = useMutation(UPDATE_ROOM, {\r\n\t\tonError: err => {\r\n\t\t\talert(err);\r\n\t\t},\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!lastMessage) return;\r\n\t\tconst lastMsg = lastMessage.messageCreated;\r\n\t\tsetMessages([...messages, lastMsg]);\r\n\t}, [lastMessage]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst chatMenuBody = document.querySelector('.chat-menu__body');\r\n\t\tif (!chatMenuBody) return;\r\n\t\tgotoBottom('.chat-menu__body');\r\n\t});\r\n\r\n\tif (getRoomsLoading) {\r\n\t\treturn <Loader />;\r\n\t}\r\n\r\n\tfunction membersListToggle() {\r\n\t\tconst membersList = document.querySelector('.chat-menu__members-list');\r\n\t\tconst chatOpen = document.querySelector('.chat-menu__members');\r\n\t\tconst confirmBtn = document.querySelector(\r\n\t\t\t'.chat-menu__new-message-confirm'\r\n\t\t);\r\n\r\n\t\tchatOpen.classList.toggle('active');\r\n\t\tmembersList.classList.toggle('active');\r\n\t\tconfirmBtn.classList.toggle('straightened');\r\n\t}\r\n\r\n\tfunction confirmBtnHandler() {\r\n\t\tconst input = document.querySelector('.chat-menu__new-message-input');\r\n\r\n\t\tif (!input.value) return;\r\n\r\n\t\tcreateMessage({\r\n\t\t\tvariables: {\r\n\t\t\t\ttext: input.value,\r\n\t\t\t},\r\n\t\t});\r\n\t\tinput.value = '';\r\n\t}\r\n\r\n\tfunction onUpdateNameHandler(e) {\r\n\t\te.stopPropagation();\r\n\t\tconst currentName = document.querySelector('.chat-menu__name')\r\n\t\t\t.innerText;\r\n\r\n\t\tif (!currentName) {\r\n\t\t\talert(\"You've entered an empty value\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tupdateRoom({\r\n\t\t\tvariables: {\r\n\t\t\t\tid: currentRoom.id,\r\n\t\t\t\tname: currentName,\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onFocusNameHandler() {\r\n\t\tconst updateBtn = document.querySelector('.chat-menu__name-after');\r\n\t\tupdateBtn.classList.add('visible');\r\n\t}\r\n\r\n\tfunction onBlurNameHandler() {\r\n\t\tconst updateBtn = document.querySelector('.chat-menu__name-after');\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tupdateBtn.classList.remove('visible');\r\n\t\t}, 300);\r\n\t}\r\n\r\n\tconst rooms = roomsData?.rooms;\r\n\tconst currentRoom = rooms?.find(r => r.id === roomId);\r\n\tconst isOwner = currentRoom?.owner.id === currentUser?.id;\r\n\r\n\tif (!currentRoom) {\r\n\t\treturn (\r\n\t\t\t<div className='chat-menu'>\r\n\t\t\t\t<div className='chat-menu__top'>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='chat-menu__leave'\r\n\t\t\t\t\t\tonClick={() => leaveCurrentRoom()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<img src={LeaveIcon} alt='Leave' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>Error, current room is not defined</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (!currentUser.currentRoom) {\r\n\t\treturn <Redirect to='/rooms' />;\r\n\t}\r\n\r\n\tif (currentUser.currentRoom.id !== currentRoom.id) {\r\n\t\treturn <Redirect to={`/rooms/${currentUser.currentRoom.id}`} />;\r\n\t}\r\n\r\n\tif (!hasRoomsData) {\r\n\t\tsetHasRoomsData(true);\r\n\t\tsetMessages(currentRoom.lastMessages);\r\n\t\tsetMembers(currentRoom.members);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='chat-menu'>\r\n\t\t\t<div className='chat-menu__top'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='chat-menu__leave'\r\n\t\t\t\t\tonClick={() => leaveCurrentRoom()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<img src={LeaveIcon} alt='Leave' />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='chat-menu__name-wrapper'\r\n\t\t\t\t\tonBlur={() => onBlurNameHandler()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tcontentEditable={isOwner ? 'true' : 'false'}\r\n\t\t\t\t\t\tspellCheck='false'\r\n\t\t\t\t\t\tclassName='chat-menu__name'\r\n\t\t\t\t\t\tonFocus={() => onFocusNameHandler()}\r\n\t\t\t\t\t\tsuppressContentEditableWarning={true}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{currentRoom.name}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='chat-menu__name-after'\r\n\t\t\t\t\t\tonClick={e => onUpdateNameHandler(e)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<img src={UpdateIcon} alt='Update' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{isOwner && (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tdeleteRoom({\r\n\t\t\t\t\t\t\t\t\tvariables: {\r\n\t\t\t\t\t\t\t\t\t\tid: currentRoom.id,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tclassName='chat-menu__delete'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='chat-menu__body'>\r\n\t\t\t\t<div className='chat-menu__messages'>\r\n\t\t\t\t\t{messages.map(message => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\tmessage.author.id === currentUser.id\r\n\t\t\t\t\t\t\t\t\t? 'mine messages'\r\n\t\t\t\t\t\t\t\t\t: 'yours messages'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div className='message'>{message.text}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='chat-menu__bottom'>\r\n\t\t\t\t<div className='chat-menu__new-message'>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tplaceholder='Write a message...'\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tclassName='chat-menu__new-message-input'\r\n\t\t\t\t\t\tonKeyUp={e => {\r\n\t\t\t\t\t\t\tif (e.key === 'Enter') {\r\n\t\t\t\t\t\t\t\tconfirmBtnHandler();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<div className='chat-menu__members'>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tclassName='chat-menu__members-img'\r\n\t\t\t\t\t\t\tsrc={ChatMembersIcon}\r\n\t\t\t\t\t\t\talt='chat-members'\r\n\t\t\t\t\t\t\tonClick={() => membersListToggle()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<ul className='chat-menu__members-list'>\r\n\t\t\t\t\t\t\t{members.map(member => (\r\n\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\tkey={member.id}\r\n\t\t\t\t\t\t\t\t\tclassName='chat-menu__member'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{currentUser.id === member.id && 'Me: '}\r\n\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\tcurrentUser.id === member.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t? 'chat-menu__member-me'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{member.username}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t{member.id === currentRoom.owner.id &&\r\n\t\t\t\t\t\t\t\t\t\t' <-- Owner'}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='chat-menu__new-message-confirm'\r\n\t\t\t\t\t\tonClick={() => confirmBtnHandler()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<img src={SendMessageIcon} alt='Send' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChatMenu;\r\n","export function gotoBottom(query) {\r\n\tconst element = document.querySelector(query);\r\n\telement.scrollTop = element.scrollHeight;\r\n}\r\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import { useMutation } from '@apollo/client';\r\nimport { currentUserVar } from '../../../../cache';\r\nimport { SET_USER_CURRENT_ROOM } from '../../../../operations/mutations/chatMutations';\r\nimport './chat.scss';\r\n\r\nfunction Chat({ room, history }) {\r\n\tconst [setUserCurrentRoom] = useMutation(SET_USER_CURRENT_ROOM, {\r\n\t\tvariables: {\r\n\t\t\troomId: room.id,\r\n\t\t},\r\n\t\tonError: err => {\r\n\t\t\tconsole.log(err);\r\n\t\t},\r\n\t});\r\n\r\n\tconst userId = currentUserVar().id;\r\n\r\n\tconst ownerId = room.owner.id;\r\n\tconst isOwner = userId === ownerId;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={isOwner ? 'room room-owner' : 'room'}\r\n\t\t\tonClick={() => {\r\n\t\t\t\tsetUserCurrentRoom().then(() => {\r\n\t\t\t\t\tcurrentUserVar({\r\n\t\t\t\t\t\t...currentUserVar(),\r\n\t\t\t\t\t\tcurrentRoom: { id: room.id },\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\thistory.push(`/rooms/${room.id}`);\r\n\t\t\t\t});\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div className='room__name'>{room.name}</div>\r\n\t\t\t<div className='room__date'>\r\n\t\t\t\t{room.timestamp.replace('T', ' ').substr(0, 19)}\r\n\t\t\t</div>\r\n\t\t\t<div className='room__open'>Open</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Chat;\r\n","import { useQuery, useSubscription } from '@apollo/client';\r\nimport { useEffect } from 'react';\r\nimport { GET_ALL_ROOMS } from '../../../operations/queries/chatQueries';\r\nimport {\r\n\tROOM_CREATED_SUB,\r\n\tROOM_DELETED_SUB,\r\n\tROOM_UPDATED,\r\n} from '../../../operations/subscriptions/chatSubscriptions';\r\nimport Loader from '../../../utils/loader/Loader';\r\nimport Chat from './chat/Chat';\r\nimport './chatList.scss';\r\n\r\nfunction ChatList({ history }) {\r\n\tuseSubscription(ROOM_UPDATED);\r\n\r\n\tconst { subscribeToMore, data, loading } = useQuery(GET_ALL_ROOMS, {\r\n\t\tfetchPolicy: 'network-only',\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tsubscribeToNewRooms();\r\n\t\tsubscribeToDeleteRooms();\r\n\t}, []);\r\n\r\n\tif (loading) return <Loader />;\r\n\r\n\tconst rooms = data?.rooms;\r\n\tconsole.log('rooms:', rooms);\r\n\r\n\tfunction subscribeToNewRooms() {\r\n\t\tsubscribeToMore({\r\n\t\t\tdocument: ROOM_CREATED_SUB,\r\n\t\t\tupdateQuery: (prev, { subscriptionData }) => {\r\n\t\t\t\tif (!subscriptionData.data) return prev;\r\n\t\t\t\tconst newFeedItem = subscriptionData.data.roomCreated;\r\n\t\t\t\treturn Object.assign({}, prev, {\r\n\t\t\t\t\trooms: [newFeedItem, ...prev.rooms],\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tfunction subscribeToDeleteRooms() {\r\n\t\tsubscribeToMore({\r\n\t\t\tdocument: ROOM_DELETED_SUB,\r\n\t\t\tupdateQuery: (prev, { subscriptionData }) => {\r\n\t\t\t\tif (!subscriptionData.data) return prev;\r\n\r\n\t\t\t\tconst newFeedItem = subscriptionData.data.roomDeleted;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\trooms: prev.rooms.filter(\r\n\t\t\t\t\t\troom => room.id !== newFeedItem.id\r\n\t\t\t\t\t),\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='chat-list'>\r\n\t\t\t{rooms ? (\r\n\t\t\t\trooms.map(room => (\r\n\t\t\t\t\t<Chat key={room.id} room={room} history={history} />\r\n\t\t\t\t))\r\n\t\t\t) : (\r\n\t\t\t\t<div>No rooms</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChatList;\r\n","import { useMutation, useReactiveVar } from '@apollo/client';\r\nimport { useState } from 'react';\r\nimport { popupDisplayVar } from '../../cache';\r\nimport { CREATE_NEW_ROOM } from '../../operations/mutations/chatMutations';\r\nimport Input from '../../utils/input/Input';\r\n\r\nconst Popup = () => {\r\n\tconst [roomName, setRoomName] = useState('');\r\n\tconst popupDisplay = useReactiveVar(popupDisplayVar);\r\n\tconst [createRoom] = useMutation(CREATE_NEW_ROOM);\r\n\r\n\tfunction createRoomHandler() {\r\n\t\tif (!roomName) return;\r\n\r\n\t\tcreateRoom({\r\n\t\t\tvariables: { name: roomName },\r\n\t\t});\r\n\t\tpopupDisplayVar('none');\r\n\t\tsetRoomName('');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName='popup'\r\n\t\t\tstyle={{ display: popupDisplay }}\r\n\t\t\tonClick={() => popupDisplayVar('none')}\r\n\t\t>\r\n\t\t\t<div className='popup__content' onClick={e => e.stopPropagation()}>\r\n\t\t\t\t<div className='popup__header'>\r\n\t\t\t\t\t<div className='popup__title'>Create new room</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='popup__close'\r\n\t\t\t\t\t\tonClick={() => popupDisplayVar('none')}\r\n\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tX\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tplaceholder='Enter room name...'\r\n\t\t\t\t\tvalue={roomName}\r\n\t\t\t\t\tsetValue={setRoomName}\r\n\t\t\t\t/>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='popup__create'\r\n\t\t\t\t\tonClick={() => createRoomHandler()}\r\n\t\t\t\t>\r\n\t\t\t\t\tCreate\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Popup;\r\n","import { currentUserVar, popupDisplayVar } from '../../cache';\r\nimport ChatList from './chatList/ChatList';\r\nimport './chatSection.scss';\r\nimport Popup from './Popup';\r\n\r\nfunction ChatSection({ history }) {\r\n\tconst currentUser = currentUserVar();\r\n\r\n\tif (currentUser?.currentRoom) {\r\n\t\thistory.push(`/rooms/${currentUser.currentRoom.id}`);\r\n\t}\r\n\r\n\tfunction showPopupHandler() {\r\n\t\tpopupDisplayVar('flex');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='chat-section'>\r\n\t\t\t<div className='chat-section__top'>\r\n\t\t\t\t<div className='chat-section__label'>List of rooms</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='chat-section__create-chat'\r\n\t\t\t\t\tonClick={() => showPopupHandler()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<button>New room</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<ChatList history={history} />\r\n\t\t\t<Popup />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChatSection;\r\n","export default __webpack_public_path__ + \"static/media/logout.f21aa689.svg\";","import { useQuery } from '@apollo/client';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport LogoutIcon from '../../assets/icons/logout.svg';\r\nimport { PROFILE_QUERY } from '../../operations/queries/authorization';\r\nimport Logo from './../../assets/icons/logo.png';\r\nimport './navbar.scss';\r\n\r\nfunction Navbar() {\r\n\tconst { data } = useQuery(PROFILE_QUERY, {\r\n\t\tfetchPolicy: 'cache-only',\r\n\t});\r\n\r\n\tconst currentUser = data?.me;\r\n\r\n\tfunction logOutHandler() {\r\n\t\tlocalStorage.removeItem('token');\r\n\t\twindow.location.reload(false);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='navbar'>\r\n\t\t\t<div className='container'>\r\n\t\t\t\t<div className='navbar__top' to='/'>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={Logo}\r\n\t\t\t\t\t\talt='navbar-logo'\r\n\t\t\t\t\t\tclassName='navbar__logo'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className='navbar__header'>Chinchuk</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!currentUser && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className='navbar__login'>\r\n\t\t\t\t\t\t\t<NavLink to='/login'>Sign in</NavLink>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='navbar__registration'>\r\n\t\t\t\t\t\t\t<NavLink to='/registration'>Sign up</NavLink>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{currentUser && (\r\n\t\t\t\t\t<div className='navbar__logout'>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tclassName='navbar__logout-button'\r\n\t\t\t\t\t\t\tto='/login'\r\n\t\t\t\t\t\t\tonClick={() => logOutHandler()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img src={LogoutIcon} alt='logout-icon'></img>\r\n\t\t\t\t\t\t\t<div className='navbar__logout-text'>LOGOUT</div>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default withRouter(Navbar);\r\n","export default \"data:image/png;base64,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\"","import { useQuery } from '@apollo/client';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport { currentUserVar } from '../cache';\r\nimport { PROFILE_QUERY } from '../operations/queries/authorization';\r\nimport Loader from '../utils/loader/Loader';\r\nimport './app.scss';\r\nimport Login from './authorization/Login';\r\nimport Registration from './authorization/Registration';\r\nimport ChatMenu from './chatSection/chatList/chatMenu/ChatMenu';\r\nimport ChatSection from './chatSection/ChatSection';\r\nimport Navbar from './navbar/Navbar';\r\n\r\nfunction App() {\r\n\tconst { loading, data } = useQuery(PROFILE_QUERY, {\r\n\t\tfetchPolicy: 'cache-first',\r\n\t});\r\n\r\n\tif (loading) {\r\n\t\treturn <Loader />;\r\n\t}\r\n\r\n\tcurrentUserVar(data?.me);\r\n\r\n\tconst currentUser = currentUserVar();\r\n\tconsole.log(currentUser);\r\n\r\n\treturn (\r\n\t\t<div className='app'>\r\n\t\t\t<Navbar />\r\n\r\n\t\t\t<div className='wrap'>\r\n\t\t\t\t{!currentUser ? (\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path='/registration' component={Registration} />\r\n\t\t\t\t\t\t<Route path='/login' component={Login} />\r\n\t\t\t\t\t\t<Redirect to='/login' />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path='/rooms' component={ChatSection} exact />\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/rooms/:id'\r\n\t\t\t\t\t\t\tcomponent={ChatMenu}\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t></Route>\r\n\t\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\t\tto={\r\n\t\t\t\t\t\t\t\tcurrentUser?.currentRoom\r\n\t\t\t\t\t\t\t\t\t? `/rooms/${currentUser.currentRoom.id}`\r\n\t\t\t\t\t\t\t\t\t: '/rooms'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","export const API_URI = 'webprogbase-lab6-graphql.herokuapp.com';\r\n","import {\r\n\tApolloClient,\r\n\tApolloProvider,\r\n\tcreateHttpLink,\r\n\tsplit,\r\n} from '@apollo/client';\r\nimport { setContext } from '@apollo/client/link/context';\r\nimport { WebSocketLink } from '@apollo/client/link/ws';\r\nimport { getMainDefinition } from '@apollo/client/utilities';\r\nimport 'normalize.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import { BrowserRouter } from 'react-router-dom';\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { cache } from './cache';\r\nimport App from './components/App';\r\nimport { API_URI } from './config';\r\n\r\nconst httpLink = createHttpLink({\r\n\turi: 'https://' + API_URI,\r\n});\r\n\r\nconst authLink = setContext((_, { headers }) => {\r\n\tconst token = localStorage.getItem('token');\r\n\r\n\treturn {\r\n\t\theaders: {\r\n\t\t\t...headers,\r\n\t\t\tauthorization: token ? `Bearer ${token}` : '',\r\n\t\t},\r\n\t};\r\n});\r\n\r\nconst wsLink = new WebSocketLink({\r\n\turi: 'wss://' + API_URI + '/graphql',\r\n\toptions: {\r\n\t\treconnect: true,\r\n\t\tconnectionParams: {\r\n\t\t\tAuthorization: `Bearer ${localStorage.getItem('token')}`,\r\n\t\t},\r\n\t},\r\n});\r\n\r\nconst concatedLink = authLink.concat(httpLink);\r\n\r\nconst splitLink = split(\r\n\t({ query }) => {\r\n\t\tconst definition = getMainDefinition(query);\r\n\t\treturn (\r\n\t\t\tdefinition.kind === 'OperationDefinition' &&\r\n\t\t\tdefinition.operation === 'subscription'\r\n\t\t);\r\n\t},\r\n\twsLink,\r\n\tconcatedLink\r\n);\r\n\r\nconst client = new ApolloClient({\r\n\tlink: splitLink,\r\n\tcache,\r\n});\r\n\r\nReactDOM.render(\r\n\t<ApolloProvider client={client}>\r\n\t\t<Router>\r\n\t\t\t<App />\r\n\t\t</Router>\r\n\t</ApolloProvider>,\r\n\tdocument.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"input_input__3NsAX\"};"],"sourceRoot":""}